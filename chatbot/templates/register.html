{% extends 'base.html' %} {% block content %}
<style>
  .register-container {
    background: linear-gradient(
        rgba(255, 255, 255, 0.9),
        rgba(255, 255, 255, 0.9)
      ),
      url("https://img.freepik.com/free-photo/medical-banner-with-stethoscope_23-2149611199.jpg");
    background-size: cover;
    background-position: center;
    padding: 40px 0;
    border-radius: 15px;
  }
  .form-control {
    border-radius: 10px;
    padding: 12px;
    border: 1px solid #dde;
  }
  .form-control:focus {
    box-shadow: 0 0 0 0.2rem rgba(102, 126, 234, 0.25);
    border-color: #667eea;
  }
  .register-card {
    background: rgba(255, 255, 255, 0.95);
    border-radius: 15px;
    box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
  }
  .register-header {
    background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
    color: white;
    padding: 20px;
    border-radius: 15px 15px 0 0;
    text-align: center;
  }
  .register-icon {
    font-size: 48px;
    margin-bottom: 15px;
  }
  .field-section {
    background: #f8f9fa;
    padding: 20px;
    border-radius: 10px;
    margin-bottom: 20px;
  }
  .btn-register {
    background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
    border: none;
    padding: 12px;
    font-weight: bold;
    letter-spacing: 1px;
  }
  .btn-register:hover {
    transform: translateY(-2px);
    box-shadow: 0 4px 15px rgba(102, 126, 234, 0.4);
  }
</style>

<div class="register-container">
  <div class="row justify-content-center">
    <div class="col-md-8">
      <div class="card register-card">
        <div class="register-header">
          <i class="fas fa-user-plus register-icon"></i>
          <h2 class="mb-0">Join Our Therapy Community</h2>
          <p class="mb-0">Begin your journey to mental wellness</p>
        </div>
        <div class="card-body p-4">
          <form
            method="post"
            enctype="multipart/form-data"
            class="needs-validation"
            novalidate
          >
            {% csrf_token %}

            <div class="field-section">
              <h5 class="mb-3">
                <i class="fas fa-user text-primary"></i> Account Information
              </h5>
              <div class="row g-3">
                <div class="col-md-6 mb-3">
                  <label
                    for="{{ form.username.id_for_label }}"
                    class="form-label"
                    >Username</label
                  >
                  {{ form.username }}
                </div>
                <div class="col-md-6 mb-3">
                  <label for="{{ form.email.id_for_label }}" class="form-label"
                    >Email</label
                  >
                  {{ form.email }}
                </div>
                <div class="col-md-6 mb-3">
                  <label for="{{ form.user_type.id_for_label }}" class="form-label">User Type</label>
                  {{ form.user_type }}
                </div>
              </div>
            </div>

            <div class="field-section">
              <h5 class="mb-3">
                <i class="fas fa-info-circle text-primary"></i> Personal Details
              </h5>
              <div class="row g-3">
                <div class="col-md-6 mb-3">
                  <label for="{{ form.phone.id_for_label }}" class="form-label"
                    >Phone Number</label
                  >
                  {{ form.phone }}
                </div>
                <div class="col-md-6 mb-3">
                  <label for="{{ form.age.id_for_label }}" class="form-label"
                    >Age</label
                  >
                  {{ form.age }}
                </div>
                <div class="col-12 mb-3">
                  <label
                    for="{{ form.address.id_for_label }}"
                    class="form-label"
                    >Address</label
                  >
                  {{ form.address }}
                </div>
              </div>
            </div>

            <div class="field-section doctor-fields">
              <h5 class="mb-3"><i class="fas fa-user-md text-primary"></i> Doctor Details</h5>
              <div class="row g-3">
                  <div class="col-md-6 mb-3">
                      <label for="{{ form.specialization.id_for_label }}" class="form-label">Specialization</label>
                      {{ form.specialization }}
                  </div>
                  <div class="col-md-6 mb-3">
                      <label for="{{ form.experience.id_for_label }}" class="form-label">Experience (years)</label>
                      {{ form.experience }}
                  </div>
                  <div class="col-12 mb-3">
                      <label for="{{ form.available_times.id_for_label }}" class="form-label">Available Times</label>
                      {{ form.available_times }}
                  </div>
              </div>
            </div>

            <div class="field-section">
              <h5 class="mb-3">
                <i class="fas fa-lock text-primary"></i> Security
              </h5>
              <div class="row g-3">
                <div class="col-md-6 mb-3">
                  <label
                    for="{{ form.password1.id_for_label }}"
                    class="form-label"
                    >Password</label
                  >
                  {{ form.password1 }}
                </div>
                <div class="col-md-6 mb-3">
                  <label
                    for="{{ form.password2.id_for_label }}"
                    class="form-label"
                    >Confirm Password</label
                  >
                  {{ form.password2 }}
                </div>
              </div>
            </div>

            <div class="field-section">
              <h5 class="mb-3">
                <i class="fas fa-image text-primary"></i> Profile Picture
              </h5>
              <div class="mb-3">{{ form.profile_picture }}</div>
            </div>

            {% if form.errors %}
            <div class="alert alert-danger">
              <ul class="mb-0">
                {% for field in form %} {% for error in field.errors %}
                <li>{{ error }}</li>
                {% endfor %} {% endfor %}
              </ul>
            </div>
            {% endif %}

            <button type="submit" class="btn btn-primary btn-register w-100">
              Create Account
            </button>
          </form>
          <div class="text-center mt-3">
            <p>
              Already have an account?
              <a href="{% url 'login' %}" class="text-primary">Login here</a>
            </p>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

<script>
document.addEventListener('DOMContentLoaded', function() {
    const userType = document.getElementById('id_user_type');
    const doctorFields = document.querySelectorAll('.doctor-fields');

    function toggleDoctorFields() {
        const isDoctor = userType.value === 'doctor';
        doctorFields.forEach(field => {
            field.style.display = isDoctor ? 'block' : 'none';
        });
    }

    userType.addEventListener('change', toggleDoctorFields);
    toggleDoctorFields();
});
</script>
{% endblock %}
